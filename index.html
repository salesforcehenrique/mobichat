<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Chat com Salesforce</title>
</head>
<body>
  <h1>Página de Teste do Chat</h1>
  <p>O chat será carregado no canto inferior direito.</p>

  <script type="text/javascript">
    // --- Dados simulados do usuário ---
    var preChatNomeDoUsuarioLogado = "Igor Nogueira Silva";
    var preChatCPF = "085.094.706-50";
    var preChatCodigoConta = "C-9";
    var preChatCodigoUsuario = "U-16010";

    // --- Inicialização do Web Chat Enhanced v1 ---
    var initESW = function(gslbBaseURL) {

      // Envio dos valores via prechat v1
      embedded_svc.settings.extraPrechatFormDetails = [
        {
          "label": "preChatNomeDoUsuarioLogado",
          "value": preChatNomeDoUsuarioLogado,
          "displayToAgent": true
        },
        {
          "label": "preChatCPF",
          "value": preChatCPF,
          "displayToAgent": true
        },
        {
          "label": "preChatCodigoConta",
          "value": preChatCodigoConta,
          "displayToAgent": true
        },
        {
          "label": "preChatCodigoUsuario",
          "value": preChatCodigoUsuario,
          "displayToAgent": true
        }
      ];

      // Configurações padrão do snippet v1
      embedded_svc.settings.displayHelpButton = true;
      embedded_svc.settings.language = 'pt_BR';

      embedded_svc.init(
        'https://segimob--staging.sandbox.my.salesforce.com',
        'https://segimob--staging.sandbox.my.site.com/ESWChatMobi1764466409624',
        '00Dbe000002jTkf',
        'Chat_Mobi',
        {
          baseLiveAgentContentURL: 'https://c.la4-cdn.salesforceliveagent.com/content',
          deploymentId: 'COLOQUE_AQUI_SEU_DEPLOYMENT_ID',
          buttonId: 'COLOQUE_AQUI_SEU_BUTTON_ID',
          baseLiveAgentURL: 'https://d.la4.salesforceliveagent.com/chat',
          eswLiveAgentDevName: 'Chat_Mobi',
          isOfflineSupportEnabled: false
        }
      );
    };

    // Carrega o script responsável por criar window.embedded_svc
    if (!window.embedded_svc) {
      var s = document.createElement('script');
      s.setAttribute('src', 'https://segimob--staging.sandbox.my.salesforce.com/embeddedservice/asyncclient/bootstrap.min.js');
      s.onload = function() { initESW(null); };
      document.body.appendChild(s);
    } else {
      initESW(null);
    }
  </script>

</body>
</html>
