<script type="text/javascript">
  const preChatNomeDoUsuarioLogado = "Yatagan Farias";
  const preChatCPF = "123.456.189-10";
  const preChatCodigoConta = "C-9999";
  const preChatCodigoUsuario = "U-9999";

  function initEmbeddedMessaging() {
    try {
      embeddedservice_bootstrap.settings.language = 'pt_BR';

      // Pr√©-chat oculto (opcional, se n√£o quiser mostrar form)
      embeddedservice_bootstrap.settings.prechatConfig = {
        hiddenFields: {
          preChatNomeDoUsuarioLogado,
          preChatCPF,
          preChatCodigoConta,
          preChatCodigoUsuario
        }
      };

      // üö® Definindo routingAttributes explicitamente
      embeddedservice_bootstrap.init(
        '00Dbe000002jTkf', // ORG_ID
        'Chat_Mobi',       // Deployment Name
        'https://segimob--staging.sandbox.my.site.com/ESWChatMobi1764466409624',
        {
          scrt2URL: 'https://segimob--staging.sandbox.my.salesforce-scrt.com',
          // Isso garante que os dados cheguem ao Flow de roteamento
          routingAttributes: {
            preChatNomeDoUsuarioLogado,
            preChatCPF,
            preChatCodigoConta,
            preChatCodigoUsuario
          }
        }
      );
    } catch (err) {
      console.error("‚ùå Erro ao iniciar o chat v2:", err);
    }
  }

  window.addEventListener("onEmbeddedMessagingReady", function () {
    console.log("‚úÖ Chat V2 pronto. RoutingAttributes definidos corretamente.");
  });
</script>

<script
  type="text/javascript"
  src="https://segimob--staging.sandbox.my.site.com/ESWChatMobi1764466409624/assets/js/bootstrap.min.js"
  onload="initEmbeddedMessaging()">
</script>
